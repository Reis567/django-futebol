{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container">
    <h2>Detalhes do Time: {{ time.nome }}</h2>
    
    <div class="team-info">
        <p><strong>Sigla:</strong> {{ time.sigla }}</p>
        <p><strong>Técnico:</strong> {{ time.tecnico }}</p>
    </div>

    <!-- Campo de Futebol -->
    <div class="soccer-field">
        <div class="field-section" id="goleiro">{{ jogadores_titulares|filter: "posicao=GOL" }}</div>
        <div class="field-section" id="defensores">
            {% for jogador in jogadores_titulares %}
                {% if jogador.posicao == 'DEF' %}
                    <span>{{ jogador.nome }}</span>
                {% endif %}
            {% endfor %}
        </div>
        <div class="field-section" id="meio-campo">
            {% for jogador in jogadores_titulares %}
                {% if jogador.posicao == 'MEI' %}
                    <span>{{ jogador.nome }}</span>
                {% endif %}
            {% endfor %}
        </div>
        <div class="field-section" id="atacantes">
            {% for jogador in jogadores_titulares %}
                {% if jogador.posicao == 'ATA' %}
                    <span>{{ jogador.nome }}</span>
                {% endif %}
            {% endfor %}
        </div>
    </div>

    <!-- Lista de Jogos -->
    <h3>Partidas Finalizadas</h3>
    <table class="table">
        <thead>
            <tr>
                <th>Time Casa</th>
                <th>Placar Casa</th>
                <th>Placar Visitante</th>
                <th>Time Visitante</th>
                <th>Competição</th>
            </tr>
        </thead>
        <tbody>
            {% for partida in partidas_finalizadas %}
                <tr>
                    <td>{{ partida.time_casa.nome }}</td>
                    <td>{{ partida.placar_casa }}</td>
                    <td>{{ partida.placar_visitante }}</td>
                    <td>{{ partida.time_visitante.nome }}</td>
                    <td>{{ partida.competicao.nome }}</td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="5">Este time não participou de nenhuma partida finalizada.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<style>
    .soccer-field {
        background-color: #33aa33;
        position: relative;
        height: 300px;
        margin: 20px 0;
        border: 2px solid #000;
    }
    .field-section {
        position: absolute;
        color: white;
        font-weight: bold;
    }
    #goleiro {
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
    }
    #defensores {
        top: 80px;
        left: 50%;
        transform: translateX(-50%);
    }
    #meio-campo {
        top: 150px;
        left: 50%;
        transform: translateX(-50%);
    }
    #atacantes {
        top: 220px;
        left: 50%;
        transform: translateX(-50%);
    }
</style>
{% endblock %}
